<!DOCTYPE html>
<html>
<head>
    <title>–°–ø–æ—Ä—Ç–ù–æ–≤–æ—Å—Ç–∏</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { margin: 0; font-family: Arial; background: #f0f0f0; }
        .header { background: #1a2a3a; color: white; font-size: 24px; padding: 15px; text-align: center; }
        .container { max-width: 900px; margin: 10px auto; padding: 10px; }
        
        /* –í–∫–ª–∞–¥–∫–∏ */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        .tab {
            flex: 1;
            padding: 12px;
            text-align: center;
            background: #ddd;
            cursor: pointer;
            border-radius: 8px;
            font-weight: bold;
            transition: 0.3s;
        }
        .tab.active {
            background: #1a2a3a;
            color: white;
        }
        .tab.football.active { background: #27ae60; }
        .tab.hockey.active { background: #e67e22; }
        
        /* –ù–æ–≤–æ—Å—Ç–∏ */
        .news-column {
            background: white;
            padding: 20px;
            border-radius: 10px;
            min-height: 300px;
        }
        .news-item {
            border-bottom: 1px solid #eee;
            padding: 15px 0;
        }
        .news-item:first-child {
            padding-top: 0;
        }
        .news-item:last-child {
            border-bottom: none;
        }
        .news-date {
            color: #7f8c8d;
            font-size: 12px;
            margin-bottom: 5px;
        }
        .news-title {
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 5px;
        }
        .news-text {
            color: #34495e;
        }
        
        /* –ê–¥–º–∏–Ω–∫–∞ */
        .admin-btn { 
            position: fixed; 
            top: 10px; 
            right: 10px; 
            background: #1a2a3a; 
            color: white; 
            border: 0; 
            padding: 8px 15px; 
            border-radius: 5px; 
            cursor: pointer; 
            z-index: 999; 
        }
        .admin-panel { 
            background: #fff3cd; 
            padding: 20px; 
            border-radius: 10px; 
            margin: 10px 0 20px 0; 
            border: 2px solid #ffc107; 
        }
        input, textarea { 
            width: 100%; 
            margin: 5px 0; 
            padding: 8px; 
            border: 1px solid #ccc; 
            border-radius: 4px; 
            box-sizing: border-box; 
        }
        button { 
            background: #1a2a3a; 
            color: white; 
            border: 0; 
            padding: 8px 15px; 
            border-radius: 4px; 
            cursor: pointer; 
        }
        button.delete {
            background: #dc3545;
            padding: 3px 8px;
            margin-left: 10px;
            font-size: 12px;
        }
        .login-box { 
            background: white; 
            padding: 20px; 
            border-radius: 10px; 
            max-width: 300px; 
            margin: 20px auto; 
            box-shadow: 0 0 10px rgba(0,0,0,0.1); 
        }
        .hidden { display: none; }
        
        /* –§–æ—Ä–º—ã –≤ –∞–¥–º–∏–Ω–∫–µ */
        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>

<div class="header">‚öΩ –°–ü–û–†–¢–ù–û–í–û–°–¢–ò üèí</div>

<!-- –ö–Ω–æ–ø–∫–∞ –∞–¥–º–∏–Ω–∫–∏ -->
<button class="admin-btn" onclick="showLogin()">üîë –ê–¥–º–∏–Ω–∫–∞</button>

<div class="container">
    <!-- –û–∫–Ω–æ –≤—Ö–æ–¥–∞ -->
    <div id="loginModal" class="hidden">
        <div class="login-box">
            <h3>üîê –í—Ö–æ–¥ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h3>
            <input type="password" id="passwordInput" placeholder="–ü–∞—Ä–æ–ª—å">
            <button onclick="checkPassword()">–í–æ–π—Ç–∏</button>
            <button onclick="hideLogin()">–û—Ç–º–µ–Ω–∞</button>
            <div id="loginError" style="color:red; margin-top:10px;"></div>
        </div>
    </div>

    <!-- –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∞ -->
    <div id="adminPanel" class="admin-panel hidden">
        <h3>‚öôÔ∏è –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h3>
        <div class="form-grid">
            <div>
                <h4 style="color:#27ae60;">‚öΩ –î–æ–±–∞–≤–∏—Ç—å —Ñ—É—Ç–±–æ–ª</h4>
                <input id="fDate" placeholder="–î–∞—Ç–∞" value="19.02.2026">
                <input id="fTitle" placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫">
                <textarea id="fText" placeholder="–¢–µ–∫—Å—Ç –Ω–æ–≤–æ—Å—Ç–∏"></textarea>
                <button onclick="addNews('football')">‚ûï –î–æ–±–∞–≤–∏—Ç—å</button>
            </div>
            <div>
                <h4 style="color:#e67e22;">üèí –î–æ–±–∞–≤–∏—Ç—å —Ö–æ–∫–∫–µ–π</h4>
                <input id="hDate" placeholder="–î–∞—Ç–∞" value="19.02.2026">
                <input id="hTitle" placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫">
                <textarea id="hText" placeholder="–¢–µ–∫—Å—Ç –Ω–æ–≤–æ—Å—Ç–∏"></textarea>
                <button onclick="addNews('hockey')">‚ûï –î–æ–±–∞–≤–∏—Ç—å</button>
            </div>
        </div>
        <button onclick="logout()" style="background: #dc3545;">–í—ã–π—Ç–∏</button>
    </div>

    <!-- –í–∫–ª–∞–¥–∫–∏ -->
    <div class="tabs">
        <div class="tab football active" onclick="showTab('football')">‚öΩ –§–£–¢–ë–û–õ</div>
        <div class="tab hockey" onclick="showTab('hockey')">üèí –•–û–ö–ö–ï–ô</div>
    </div>

    <!-- –ù–æ–≤–æ—Å—Ç–∏ -->
    <div id="footballTab" class="news-column">
        <div id="footballNews">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    </div>
    
    <div id="hockeyTab" class="news-column hidden">
        <div id="hockeyNews">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    </div>
</div>

<script>
// ======== –ù–ê–°–¢–†–û–ô–ö–ò ========
const SECRET_PASSWORD = "sport123";
// –í–°–¢–ê–í–¨ –°–í–û–Æ –°–°–´–õ–ö–£ –ù–ê CSV
const SHEET_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQjTIrpPqxCd_vWnU-G7VrOo0Xxrdf3sVgVWQCzXJ6C5IqXmXx2p0Q6lLx7KjF8nA/pub?output=csv";

let isAdmin = false;
let allNews = [];

// –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
function showTab(sport) {
    if(sport === 'football') {
        document.getElementById('footballTab').classList.remove('hidden');
        document.getElementById('hockeyTab').classList.add('hidden');
        document.querySelector('.tab.football').classList.add('active');
        document.querySelector('.tab.hockey').classList.remove('active');
    } else {
        document.getElementById('footballTab').classList.add('hidden');
        document.getElementById('hockeyTab').classList.remove('hidden');
        document.querySelector('.tab.football').classList.remove('active');
        document.querySelector('.tab.hockey').classList.add('active');
    }
}

// –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π –∏–∑ —Ç–∞–±–ª–∏—Ü—ã
async function loadNews() {
    try {
        const response = await fetch(SHEET_URL);
        const csv = await response.text();
        
        // –†–∞–∑–±–∏—Ä–∞–µ–º CSV
        const rows = csv.split('\n').map(row => {
            let result = [];
            let inQuotes = false;
            let current = '';
            
            for(let char of row) {
                if(char === '"' && inQuotes) {
                    inQuotes = false;
                } else if(char === '"' && !inQuotes) {
                    inQuotes = true;
                } else if(char === ',' && !inQuotes) {
                    result.push(current);
                    current = '';
                } else {
                    current += char;
                }
            }
            result.push(current);
            return result;
        });
        
        // –ü—Ä–µ–≤—Ä–∞—â–∞–µ–º –≤ –º–∞—Å—Å–∏–≤ –Ω–æ–≤–æ—Å—Ç–µ–π
        allNews = [];
        for(let i = 1; i < rows.length; i++) {
            const row = rows[i];
            if(row.length >= 4) {
                allNews.push({
                    date: row[0].replace(/"/g, ''),
                    sport: row[1].replace(/"/g, ''),
                    title: row[2].replace(/"/g, ''),
                    text: row[3].replace(/"/g, '')
                });
            }
        }
        
        // –°–æ—Ä—Ç–∏—Ä—É–µ–º: –Ω–æ–≤—ã–µ —Å–≤–µ—Ä—Ö—É (—Å–Ω–∞—á–∞–ª–∞ —Å–≤–µ–∂–∏–µ –¥–∞—Ç—ã)
        allNews.sort((a, b) => {
            const dateA = a.date.split('.').reverse().join('');
            const dateB = b.date.split('.').reverse().join('');
            return dateB.localeCompare(dateA);
        });
        
        showNews();
        
    } catch(e) {
        document.getElementById('footballNews').innerHTML = '<p>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</p>';
        document.getElementById('hockeyNews').innerHTML = '<p>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</p>';
        console.log(e);
    }
}

// –ü–æ–∫–∞–∑–∞—Ç—å –Ω–æ–≤–æ—Å—Ç–∏
function showNews() {
    let footballHtml = '';
    let hockeyHtml = '';
    
    allNews.forEach((item, index) => {
        const newsHtml = `
            <div class="news-item">
                <div class="news-date">${item.date}</div>
                <div class="news-title">${item.title}</div>
                <div class="news-text">${item.text}</div>
                ${isAdmin ? `<button class="delete" onclick="deleteNews(${index})">‚úñ –£–¥–∞–ª–∏—Ç—å</button>` : ''}
            </div>
        `;
        
        if(item.sport === '–§—É—Ç–±–æ–ª') {
            footballHtml += newsHtml;
        } else {
            hockeyHtml += newsHtml;
        }
    });
    
    document.getElementById('footballNews').innerHTML = footballHtml || '<p>–ù–µ—Ç –Ω–æ–≤–æ—Å—Ç–µ–π</p>';
    document.getElementById('hockeyNews').innerHTML = hockeyHtml || '<p>–ù–µ—Ç –Ω–æ–≤–æ—Å—Ç–µ–π</p>';
}

// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏
function addNews(sport) {
    if(!isAdmin) return;
    
    const date = document.getElementById(sport === 'football' ? 'fDate' : 'hDate').value;
    const title = document.getElementById(sport === 'football' ? 'fTitle' : 'hTitle').value;
    const text = document.getElementById(sport === 'football' ? 'fText' : 'hText').value;
    const sportName = sport === 'football' ? '–§—É—Ç–±–æ–ª' : '–•–æ–∫–∫–µ–π';
    
    if(!title || !text) {
        alert('–ó–∞–ø–æ–ª–Ω–∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ —Ç–µ–∫—Å—Ç!');
        return;
    }
    
    // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é –Ω–æ–≤–æ—Å—Ç—å
    const newNews = {
        date: date,
        sport: sportName,
        title: title,
        text: text
    };
    
    // –î–æ–±–∞–≤–ª—è–µ–º –≤ –Ω–∞—á–∞–ª–æ –º–∞—Å—Å–∏–≤–∞
    allNews.unshift(newNews);
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫
    showNews();
    
    // –û—á–∏—â–∞–µ–º –ø–æ–ª—è
    if(sport === 'football') {
        document.getElementById('fTitle').value = '';
        document.getElementById('fText').value = '';
    } else {
        document.getElementById('hTitle').value = '';
        document.getElementById('hText').value = '';
    }
    
    alert('–ù–æ–≤–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∞! (–≤ –¥–µ–º–æ-—Ä–µ–∂–∏–º–µ)');
}

// –£–¥–∞–ª–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏
function deleteNews(index) {
    if(!isAdmin) return;
    
    if(confirm('–£–¥–∞–ª–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å?')) {
        allNews.splice(index, 1);
        showNews();
    }
}

// –§—É–Ω–∫—Ü–∏–∏ –≤—Ö–æ–¥–∞
function showLogin() {
    document.getElementById('loginModal').classList.remove('hidden');
}

function hideLogin() {
    document.getElementById('loginModal').classList.add('hidden');
    document.getElementById('passwordInput').value = '';
    document.getElementById('loginError').innerHTML = '';
}

function checkPassword() {
    const pwd = document.getElementById('passwordInput').value;
    if(pwd === SECRET_PASSWORD) {
        isAdmin = true;
        document.getElementById('adminPanel').classList.remove('hidden');
        hideLogin();
        showNews(); // –û–±–Ω–æ–≤–ª—è–µ–º, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫–∏ —É–¥–∞–ª–µ–Ω–∏—è
    } else {
        document.getElementById('loginError').innerHTML = '–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å!';
    }
}

function logout() {
    isAdmin = false;
    document.getElementById('adminPanel').classList.add('hidden');
    showNews(); // –£–±–∏—Ä–∞–µ–º –∫–Ω–æ–ø–∫–∏ —É–¥–∞–ª–µ–Ω–∏—è
}

// –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–æ–≤–æ—Å—Ç–∏ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
loadNews();
</script>

</body>
</html>
