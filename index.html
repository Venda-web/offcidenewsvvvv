<!DOCTYPE html>
<html>
<head>
    <title>–°–ø–æ—Ä—Ç–ù–æ–≤–æ—Å—Ç–∏</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { margin: 0; font-family: Arial; background: #f0f0f0; }
        .header { background: #1a2a3a; color: white; font-size: 24px; padding: 15px; text-align: center; }
        .container { max-width: 900px; margin: 10px auto; padding: 10px; }
        .column { background: white; padding: 15px; margin: 10px 0; border-radius: 10px; }
        .football h2 { color: #27ae60; }
        .hockey h2 { color: #e67e22; }
        .news { border-bottom: 1px solid #ddd; padding: 8px 0; }
        .news:last-child { border: 0; }
        .date { color: gray; font-size: 12px; }
        .admin-btn { position: fixed; top: 10px; right: 10px; background: #1a2a3a; color: white; border: 0; padding: 8px 15px; border-radius: 5px; cursor: pointer; z-index: 999; }
        .admin-panel { background: #fff3cd; padding: 20px; border-radius: 10px; margin: 10px 0; border: 2px solid #ffc107; }
        input, textarea { width: 100%; margin: 5px 0; padding: 8px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        button { background: #1a2a3a; color: white; border: 0; padding: 8px 15px; border-radius: 4px; cursor: pointer; }
        .login-box { background: white; padding: 20px; border-radius: 10px; max-width: 300px; margin: 20px auto; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        .hidden { display: none; }
    </style>
</head>
<body>

<div class="header">‚öΩ –°–ü–û–†–¢–ù–û–í–û–°–¢–ò üèí</div>

<!-- –ö–Ω–æ–ø–∫–∞ –∞–¥–º–∏–Ω–∫–∏ -->
<button class="admin-btn" onclick="showLogin()">üîë –ê–¥–º–∏–Ω–∫–∞</button>

<div class="container">
    <!-- –û–∫–Ω–æ –≤—Ö–æ–¥–∞ -->
    <div id="loginModal" class="hidden">
        <div class="login-box">
            <h3>üîê –í—Ö–æ–¥ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h3>
            <input type="password" id="passwordInput" placeholder="–ü–∞—Ä–æ–ª—å">
            <button onclick="checkPassword()">–í–æ–π—Ç–∏</button>
            <button onclick="hideLogin()">–û—Ç–º–µ–Ω–∞</button>
            <div id="loginError" style="color:red; margin-top:10px;"></div>
        </div>
    </div>

    <!-- –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∞ -->
    <div id="adminPanel" class="admin-panel hidden">
        <h3>‚öôÔ∏è –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h3>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div>
                <h4 style="color:#27ae60;">‚öΩ –§—É—Ç–±–æ–ª</h4>
                <input id="fDate" placeholder="–î–∞—Ç–∞" value="18.02.2026">
                <input id="fTitle" placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫">
                <textarea id="fText" placeholder="–¢–µ–∫—Å—Ç –Ω–æ–≤–æ—Å—Ç–∏"></textarea>
                <button onclick="addFootball()">‚ûï –î–æ–±–∞–≤–∏—Ç—å</button>
            </div>
            <div>
                <h4 style="color:#e67e22;">üèí –•–æ–∫–∫–µ–π</h4>
                <input id="hDate" placeholder="–î–∞—Ç–∞" value="18.02.2026">
                <input id="hTitle" placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫">
                <textarea id="hText" placeholder="–¢–µ–∫—Å—Ç –Ω–æ–≤–æ—Å—Ç–∏"></textarea>
                <button onclick="addHockey()">‚ûï –î–æ–±–∞–≤–∏—Ç—å</button>
            </div>
        </div>
        <button onclick="logout()" style="background: #dc3545; margin-top:10px;">–í—ã–π—Ç–∏</button>
    </div>

    <!-- –ù–æ–≤–æ—Å—Ç–∏ -->
    <div class="column football">
        <h2>‚öΩ –§–£–¢–ë–û–õ</h2>
        <div id="footballNews"></div>
    </div>
    
    <div class="column hockey">
        <h2>üèí –•–û–ö–ö–ï–ô</h2>
        <div id="hockeyNews"></div>
    </div>
</div>

<script>
// ======== –¢–í–û–ô –ü–ê–†–û–õ–¨ ========
const SECRET_PASSWORD = "sport123";

// ======== –°–°–´–õ–ö–ê –ù–ê –¢–ê–ë–õ–ò–¶–£ ========
// –í–°–¢–ê–í–¨ –°–í–û–Æ –°–°–´–õ–ö–£ –°–Æ–î–ê (–∫–æ—Ç–æ—Ä—É—é –ø–æ–ª—É—á–∏–ª –ø—Ä–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏)
const SHEET_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTJ4YwTscKacmVUgHmXUcQtizBM_I-WJJc-BlbQiVLYyXIDVquXaZv39P0HQCGHV0MLugsy2K8FtCwD/pub?gid=0&single=true&output=csv";

let isAdmin = false;

// –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π
async function loadNews() {
    try {
        const response = await fetch(SHEET_URL);
        const csv = await response.text();
        
        // –†–∞–∑–±–∏—Ä–∞–µ–º CSV
        const rows = csv.split('\n').map(row => {
            // –•–∏—Ç—Ä—ã–π —Å–ø–æ—Å–æ–± —Ä–∞–∑–¥–µ–ª–∏—Ç—å CSV —Å –∑–∞–ø—è—Ç—ã–º–∏ –≤–Ω—É—Ç—Ä–∏ –∫–∞–≤—ã—á–µ–∫
            let result = [];
            let inQuotes = false;
            let current = '';
            
            for(let char of row) {
                if(char === '"' && inQuotes) {
                    inQuotes = false;
                } else if(char === '"' && !inQuotes) {
                    inQuotes = true;
                } else if(char === ',' && !inQuotes) {
                    result.push(current);
                    current = '';
                } else {
                    current += char;
                }
            }
            result.push(current);
            return result;
        });
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–æ–≤–æ—Å—Ç–∏
        let footballHtml = '';
        let hockeyHtml = '';
        
        // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ (–ø–µ—Ä–≤—É—é —Å—Ç—Ä–æ–∫—É)
        for(let i = 1; i < rows.length; i++) {
            const row = rows[i];
            if(row.length >= 4) {
                const date = row[0].replace(/"/g, '');
                const sport = row[1].replace(/"/g, '');
                const title = row[2].replace(/"/g, '');
                const text = row[3].replace(/"/g, '');
                
                const newsItem = `
                    <div class="news">
                        <span class="date">${date}</span>
                        <b>${title}</b><br>${text}
                    </div>
                `;
                
                if(sport === '–§—É—Ç–±–æ–ª') {
                    footballHtml += newsItem;
                } else if(sport === '–•–æ–∫–∫–µ–π') {
                    hockeyHtml += newsItem;
                }
            }
        }
        
        document.getElementById('footballNews').innerHTML = footballHtml || '<p>–ù–µ—Ç –Ω–æ–≤–æ—Å—Ç–µ–π</p>';
        document.getElementById('hockeyNews').innerHTML = hockeyHtml || '<p>–ù–µ—Ç –Ω–æ–≤–æ—Å—Ç–µ–π</p>';
        
    } catch(e) {
        document.getElementById('footballNews').innerHTML = '<p>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</p>';
        document.getElementById('hockeyNews').innerHTML = '<p>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</p>';
        console.log(e);
    }
}

// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–µ–π (–ø–æ–∫–∞ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ)
function addFootball() {
    if(!isAdmin) return;
    
    const date = document.getElementById('fDate').value;
    const title = document.getElementById('fTitle').value;
    const text = document.getElementById('fText').value;
    
    if(!title || !text) {
        alert('–ó–∞–ø–æ–ª–Ω–∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ —Ç–µ–∫—Å—Ç!');
        return;
    }
    
    // –ó–¥–µ—Å—å –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –≤ Google Sheets
    alert('–§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–∫–∞ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ. –ù—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Google Forms');
    
    document.getElementById('fTitle').value = '';
    document.getElementById('fText').value = '';
}

function addHockey() {
    if(!isAdmin) return;
    
    const date = document.getElementById('hDate').value;
    const title = document.getElementById('hTitle').value;
    const text = document.getElementById('hText').value;
    
    if(!title || !text) {
        alert('–ó–∞–ø–æ–ª–Ω–∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ —Ç–µ–∫—Å—Ç!');
        return;
    }
    
    alert('–§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–∫–∞ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ. –ù—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Google Forms');
    
    document.getElementById('hTitle').value = '';
    document.getElementById('hText').value = '';
}

// –§—É–Ω–∫—Ü–∏–∏ –≤—Ö–æ–¥–∞
function showLogin() {
    document.getElementById('loginModal').classList.remove('hidden');
}

function hideLogin() {
    document.getElementById('loginModal').classList.add('hidden');
    document.getElementById('passwordInput').value = '';
    document.getElementById('loginError').innerHTML = '';
}

function checkPassword() {
    const pwd = document.getElementById('passwordInput').value;
    if(pwd === SECRET_PASSWORD) {
        isAdmin = true;
        document.getElementById('adminPanel').classList.remove('hidden');
        hideLogin();
    } else {
        document.getElementById('loginError').innerHTML = '–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å!';
    }
}

function logout() {
    isAdmin = false;
    document.getElementById('adminPanel').classList.add('hidden');
}

// –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–æ–≤–æ—Å—Ç–∏ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
loadNews();
</script>

</body>
</html>
