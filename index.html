<!DOCTYPE html>
<html>
<head>
    <title>–°–ø–æ—Ä—Ç–ù–æ–≤–æ—Å—Ç–∏</title>
    <meta charset="utf-8">
    <style>
        body { margin: 0; font-family: Arial; background: #f0f0f0; }
        .header { background: #1a2a3a; color: white; font-size: 24px; padding: 15px; text-align: center; }
        .container { max-width: 900px; margin: 10px auto; padding: 10px; }
        .column { background: white; padding: 15px; margin: 10px 0; border-radius: 10px; }
        .football h2 { color: #27ae60; }
        .hockey h2 { color: #e67e22; }
        .news { border-bottom: 1px solid #ddd; padding: 8px 0; }
        .news:last-child { border: 0; }
        .date { color: gray; font-size: 12px; }
        .admin-btn { position: fixed; top: 10px; right: 10px; background: #1a2a3a; color: white; border: 0; padding: 8px 15px; border-radius: 5px; cursor: pointer; }
        .admin-panel { background: #fff3cd; padding: 20px; border-radius: 10px; margin: 10px 0; }
        input, textarea { width: 100%; margin: 5px 0; padding: 8px; border: 1px solid #ccc; border-radius: 4px; }
        button { background: #1a2a3a; color: white; border: 0; padding: 8px 15px; border-radius: 4px; cursor: pointer; }
        .login-box { background: white; padding: 20px; border-radius: 10px; max-width: 300px; margin: 20px auto; }
        .hidden { display: none; }
    </style>
</head>
<body>

<div class="header">‚öΩ –°–ü–û–†–¢–ù–û–í–û–°–¢–ò üèí</div>

<button class="admin-btn" onclick="showLogin()">üîë –ê–¥–º–∏–Ω–∫–∞</button>

<div class="container">
    <!-- –í—Ö–æ–¥ –¥–ª—è –∞–¥–º–∏–Ω–∞ -->
    <div id="loginModal" class="hidden">
        <div class="login-box">
            <h3>üîê –í—Ö–æ–¥</h3>
            <input type="password" id="passwordInput" placeholder="–ü–∞—Ä–æ–ª—å">
            <button onclick="checkPassword()">–í–æ–π—Ç–∏</button>
            <button onclick="hideLogin()">–û—Ç–º–µ–Ω–∞</button>
            <div id="loginError" style="color:red;"></div>
        </div>
    </div>

    <!-- –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∞ -->
    <div id="adminPanel" class="admin-panel hidden">
        <h3>‚öôÔ∏è –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h3>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div>
                <h4>‚öΩ –§—É—Ç–±–æ–ª</h4>
                <input id="fDate" placeholder="–î–∞—Ç–∞" value="18.02.2026">
                <input id="fTitle" placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫">
                <textarea id="fText" placeholder="–¢–µ–∫—Å—Ç"></textarea>
                <button onclick="addNews('football')">‚ûï –î–æ–±–∞–≤–∏—Ç—å</button>
            </div>
            <div>
                <h4>üèí –•–æ–∫–∫–µ–π</h4>
                <input id="hDate" placeholder="–î–∞—Ç–∞" value="18.02.2026">
                <input id="hTitle" placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫">
                <textarea id="hText" placeholder="–¢–µ–∫—Å—Ç"></textarea>
                <button onclick="addNews('hockey')">‚ûï –î–æ–±–∞–≤–∏—Ç—å</button>
            </div>
        </div>
        <button onclick="logout()" style="background: #dc3545;">–í—ã–π—Ç–∏</button>
    </div>

    <!-- –ù–æ–≤–æ—Å—Ç–∏ -->
    <div class="column football">
        <h2>‚öΩ –§–£–¢–ë–û–õ</h2>
        <div id="footballNews">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    </div>
    
    <div class="column hockey">
        <h2>üèí –•–û–ö–ö–ï–ô</h2>
        <div id="hockeyNews">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    </div>
</div>

<script>
// ======== –ù–ê–°–¢–†–û–ô–ö–ò ========
const SECRET_PASSWORD = "sport123";
const SHEET_ID = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTJ4YwTscKacmVUgHmXUcQtizBM_I-WJJc-BlbQiVLYyXIDVquXaZv39P0HQCGHV0MLugsy2K8FtCwD/pub?output=csv"; // –í–°–¢–ê–í–¨ –°–í–û–ô ID

let isAdmin = false;

// –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–æ–≤–æ—Å—Ç–∏ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
window.onload = function() {
    loadNews();
};

// –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ Google Sheets
async function loadNews() {
    try {
        // –ü—Ä–æ–±—É–µ–º –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ –∫–µ—à–∞
        let news = JSON.parse(localStorage.getItem('cachedNews') || '[]');
        if(news.length > 0) {
            showNews(news);
        }
        
        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–≤–µ–∂–∏–µ
        const url = `https://docs.google.com/spreadsheets/d/e/${SHEET_ID}/pub?output=csv`;
        const response = await fetch(url);
        const csv = await response.text();
        
        // –ü–∞—Ä—Å–∏–º CSV
        const rows = csv.split('\n').map(row => row.split(','));
        const newsList = [];
        
        for(let i = 1; i < rows.length; i++) { // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
            if(rows[i].length >= 4) {
                newsList.push({
                    date: rows[i][0].replace(/"/g, ''),
                    sport: rows[i][1].replace(/"/g, ''),
                    title: rows[i][2].replace(/"/g, ''),
                    text: rows[i][3].replace(/"/g, '')
                });
            }
        }
        
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∫–µ—à
        localStorage.setItem('cachedNews', JSON.stringify(newsList));
        showNews(newsList);
        
    } catch(e) {
        console.log('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', e);
    }
}

// –ü–æ–∫–∞–∑–∞—Ç—å –Ω–æ–≤–æ—Å—Ç–∏
function showNews(newsList) {
    let footballHtml = '', hockeyHtml = '';
    
    newsList.forEach(item => {
        const newsItem = `<div class="news">
            <span class="date">${item.date}</span>
            <b>${item.title}</b><br>${item.text}
        </div>`;
        
        if(item.sport === '–§—É—Ç–±–æ–ª') {
            footballHtml += newsItem;
        } else {
            hockeyHtml += newsItem;
        }
    });
    
    document.getElementById('footballNews').innerHTML = footballHtml || '<p>–ù–µ—Ç –Ω–æ–≤–æ—Å—Ç–µ–π</p>';
    document.getElementById('hockeyNews').innerHTML = hockeyHtml || '<p>–ù–µ—Ç –Ω–æ–≤–æ—Å—Ç–µ–π</p>';
}

// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ (—á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É Google)
async function addNews(sport) {
    if(!isAdmin) return;
    
    const date = document.getElementById(sport === 'football' ? 'fDate' : 'hDate').value;
    const title = document.getElementById(sport === 'football' ? 'fTitle' : 'hTitle').value;
    const text = document.getElementById(sport === 'football' ? 'fText' : 'hText').value;
    const sportName = sport === 'football' ? '–§—É—Ç–±–æ–ª' : '–•–æ–∫–∫–µ–π';
    
    if(!title || !text) {
        alert('–ó–∞–ø–æ–ª–Ω–∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ —Ç–µ–∫—Å—Ç!');
        return;
    }
    
    // –ó–¥–µ—Å—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ Google Sheets
    // –ù–æ –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –ø–æ–∫–∞ –¥–æ–±–∞–≤–∏–º –≤ –∫–µ—à
    alert('–í –¥–µ–º–æ-—Ä–µ–∂–∏–º–µ –Ω–æ–≤–æ—Å—Ç—å –Ω–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è. –ù—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Google Forms');
    
    // –û—á–∏—â–∞–µ–º –ø–æ–ª—è
    if(sport === 'football') {
        document.getElementById('fTitle').value = '';
        document.getElementById('fText').value = '';
    } else {
        document.getElementById('hTitle').value = '';
        document.getElementById('hText').value = '';
    }
}

// –í—Ö–æ–¥ –≤ –∞–¥–º–∏–Ω–∫—É
function showLogin() {
    document.getElementById('loginModal').classList.remove('hidden');
}

function hideLogin() {
    document.getElementById('loginModal').classList.add('hidden');
    document.getElementById('passwordInput').value = '';
    document.getElementById('loginError').innerHTML = '';
}

function checkPassword() {
    const pwd = document.getElementById('passwordInput').value;
    if(pwd === SECRET_PASSWORD) {
        isAdmin = true;
        document.getElementById('adminPanel').classList.remove('hidden');
        hideLogin();
    } else {
        document.getElementById('loginError').innerHTML = '–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å!';
    }
}

function logout() {
    isAdmin = false;
    document.getElementById('adminPanel').classList.add('hidden');
}
</script>

</body>
</html>